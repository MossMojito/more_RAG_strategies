version: '3.8'

services:
  # ðŸ¤– Chatbot Service
  ais-rag-app:
    build: .
    container_name: ais_rag_container
    ports:
      - "7860:7860"
    volumes:
      - ./data:/app/data # Persist ChromaDB
    environment:
      - DATABRICKS_TOKEN=${DATABRICKS_TOKEN:-dummy}
      - DATABRICKS_ENDPOINT=${DATABRICKS_ENDPOINT:-http://localhost:8000}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
    restart: unless-stopped
    networks:
      - rag-network

  # ðŸ“Š Monitoring (Mock Service for Portfolio)
  # Showcasing that we typically use Prometheus/Grafana in PROD
  prometheus_mock:
    image: prom/prometheus
    ports:
      - "9090:9090"
    networks:
      - rag-network

networks:
  rag-network:
    driver: bridge
